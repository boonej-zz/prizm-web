extends altlayout
block head
  script(type='text/javascript').
    $(window).scroll(function() {
      if($(window).scrollTop() == $(document).height() - $(window).height()) {
        var lastPost = $('#institution-posts').children().last().attr('id');
        var creator = '#{institution.id}'
        $.ajax({ url: '/content/?creator=' + creator + '&lastPost=' + lastPost,
          success: function(html) {
            if(html) {
                $("#institution-posts").append(html);
            }
          }
        });
      }
    });

block content
  #institution-block.full-width
    .wrap
      #institution-header(style="background-image: url('https://#{institution.cover_photo_url.substr(7)}')")
        #avatar-header
          img(src='https://#{institution.profile_photo_url.substr(7)}')
        h2.institution-name
          | #{institution.name}
        #location-icon
        p.location
          | #{institution.city}, #{institution.state}
      #institution-posts
        if (noPosts)
          #no-posts
            h2 This Institution has not created any posts yet
        else
          each post in posts
            .post(id='#{post.id}')
              .post-image
                img(src='https://#{post.file_path.substr(7)}')
              .post-footer
                .like-icon
                p.likes
                  | #{post.likes_count}
                .comment-icon
                p.comments
                  | #{post.comments_count}
                .share-icon